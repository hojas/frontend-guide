---
title: requestIdleCallback
---

# requestIdleCallback

window.requestIdleCallback() 方法插入一个函数，这个函数将在浏览器空闲时期被调用。这使开发者能够在主事件循环上执行后台和低优先级工作，而不会影响延迟关键事件，如动画和输入响应。函数一般会按先进先调用的顺序执行，然而，如果回调函数指定了执行超时时间timeout，则有可能为了在超时前执行函数而打乱执行顺序。

你可以在空闲回调函数中调用 requestIdleCallback()，以便在下一次通过事件循环之前调度另一个回调。

## 浏览器空余时间

页面是一帧一帧渲染出来的，当每秒渲染的帧数达到 60 帧时，用户就会感觉到页面是流畅的。如果渲染的帧数低于 60 帧，用户就会感觉到页面卡顿。1 秒 60 帧，每一帧的时间就是 1000 / 60 = 16.67ms。如果每一帧的渲染时间小于 16.67ms，那么就会有空余时间。requestIdleCallback 就是利用这些空余时间来执行任务，如果任务在空余时间内没有执行完成则停止任务，继续优先执行主任务。
