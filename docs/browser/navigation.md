---
title: Chrome 页面加载过程简介
description: Chrome 页面加载过程简介
---

# Chrome 页面加载过程简介

![页面加载过程](https://chenyuanxiang.oss-cn-hangzhou.aliyuncs.com/fe-stack/browser/navigation.png)

## 1、处理输入

处理用户输入，如果是 URL 则开始导航，否则调用默认搜索引擎搜索输入内容。

## 2、开始导航

UI 线程借助网络线程访问站点资源，同时网络线程会根据适当的网络协议，例如
DNS
lookup 和 TLS 为这次请求建立连接。

## 3、处理响应

当网络线程收到来自服务器的数据时，会试图从数据中的前面的一些字节中得到数据的类型（Content-Type），以试图了解数据的格式。

当返回的数据类型是 HTML 时，会将数据传递给渲染进程做进一步的渲染工作。但是如果数据类型是 zip
文件或者其他文件格式时，会将数据传递给下载管理器做进一步的文件预览或者下载工作。

在开始渲染之前，网络线程要先检查数据的安全性，这里也是浏览器保证安全的地方。如果返回的数据来自一些恶意的站点，网络线程会显示警告的页面。同时，Cross
Origin Read Blocking(CORB)策略也会确保跨域的敏感数据不会被传递给渲染进程。

## 4、渲染进程

当所有的检查结束后，网络线程确信浏览器可以访问站点时，网络线程通知 UI 线程数据已经准备好了。UI
线程会根据当前的站点找到一个渲染进程完成接下来的渲染工作。

在第二步，UI 线程将请求地址传递给网络线程时，UI 线程就已经知道了要访问的站点。此时 UI
线程就可以开始查找或启动一个渲染进程，这个动作与让网络线程下载数据是同时的。如果网络线程按照预期获取到数据，则渲染进程就已经可以开始渲染了，这个动作减少了从网络线程开始请求数据到渲染进程可以开始渲染页面的时间。

## 5、提交访问

经历前面的步骤，数据和渲染进程都已经准备好了。浏览器进程会通过 IPC
向渲染进程提交这次访问，同时也会保证渲染进程可以通过网络线程继续获取数据。一旦浏览器进程收到来自渲染进程的确认完毕的消息，就意味着访问的过程结束了，文档渲染的过程就开始了。

## Extra Step：加载完毕

当访问被提交给渲染进程，渲染进程会继续加载页面资源并且渲染页面。当渲染进程"结束"
渲染工作，会给浏览器进程发送消息，这个消息会在页面中所有子页面结束加载后发出，也就是 onLoad 事件触发后发送。当收到"结束"
消息后，UI 线程会隐藏页签标题上的加载状态图标，表明页面加载完毕。

但这里"结束"并不意味着所有的加载工作都结束了，因为可能还有 JavaScript 在加载额外的资源或者渲染新的视图。

### 参考链接

1. https://zhuanlan.zhihu.com/p/262182267
2. https://developer.chrome.com/blog/inside-browser-part2/
